<!DOCTYPE html>
<html>
<head>
  <title>Bridge t3rn UI</title>
  <script src="https://cdn.jsdelivr.net/npm/ethers@5.7.2/dist/ethers.umd.min.js"></script>
  <style>
    body { font-family: sans-serif; max-width: 600px; margin: 40px auto; }
    input, button { padding: 10px; margin: 5px 0; width: 100%; }
    button { background: #4CAF50; color: white; border: none; }
  </style>
</head>
<body>
  <h2>Bridge to t3rn</h2>
  <label>To Chain ID:</label>
  <input type="number" id="toChainId" placeholder="Contoh: 1000" />

  <label>Amount (ETH):</label>
  <input type="text" id="amount" placeholder="Contoh: 0.01" />

  <label>Recipient Address:</label>
  <input type="text" id="recipient" placeholder="0x..." />

  <button onclick="bridge()">Bridge Now</button>

  <p id="status"></p>

  <script>
    const CONTRACT_ADDRESS = "0xYourProxyAddress"; // Ganti dengan alamat proxy
    const ABI_JSON = [
      // Ganti ini dengan ABI asli dari implementation contract
      {
        "inputs": [
          { "internalType": "uint256", "name": "toChainId", "type": "uint256" },
          { "internalType": "uint256", "name": "amount", "type": "uint256" },
          { "internalType": "address", "name": "recipient", "type": "address" }
        ],
        "name": "bridgeIn",
        "outputs": [],
        "stateMutability": "payable",
        "type": "function"
      }
    ];

    async function bridge() {
      const status = document.getElementById("status");
      if (!window.ethereum) return status.innerText = "Please install MetaMask.";

      const provider = new ethers.providers.Web3Provider(window.ethereum);
      await provider.send("eth_requestAccounts", []);
      const signer = provider.getSigner();

      const contract = new ethers.Contract(CONTRACT_ADDRESS, ABI_JSON, signer);

      const toChainId = document.getElementById("toChainId").value;
      const amount = document.getElementById("amount").value;
      const recipient = document.getElementById("recipient").value;

      status.innerText = "Sending transaction...";

      try {
        const tx = await contract.bridgeIn(
          toChainId,
          ethers.utils.parseEther(amount),
          recipient,
          { value: ethers.utils.parseEther(amount) } // if function is payable
        );
        status.innerText = "Tx sent: " + tx.hash;
        await tx.wait();
        status.innerText = "Transaction confirmed!";
      } catch (err) {
        status.innerText = "Error: " + (err.message || err);
      }
    }
  </script>
</body>
</html>
